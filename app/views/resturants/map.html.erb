<script type="text/javascript">

var map;
function initMap() {
  map = new google.maps.Map(document.getElementById('map'), {
  center: {lat: 40.7272197812854, lng: -73.9842996},
  zoom: 15
  });
  $.ajax({
    url:"/resturants_info",
    method: "GET",
    dataType: "JSON",
    success: function(data, success, xhr){
      var dat = (data.businesses)
      // console.log(dat)
      var places = []
      for(var i = 0; i<dat.length; i++){
      // console.log(typeof dat[i].location.coordinate.latitude)
      // console.log("name is " + dat[i].name +" location is "+ dat[i].location.coordinate.latitude +" "+ dat[i].location.coordinate.longitude)
      places.push({name: dat[i].name, latitude: dat[i].location.coordinate.latitude, longitude: dat[i].location.coordinate.longitude});
      // lat.push(dat[i].location.coordinate.longitude);
      }
      // console.log(places)
      for(var i =0; i<places.length; i++){
        var marker = new google.maps.Marker({
          position: {lat: places[i].latitude, lng: places[i].longitude},
          map: map,
          title: places[i].name
        });
      }



    },
    error: function(xhr, data, error){
      console.log("error is "+error);
    }
  });






}
google.maps.event.addDomListener(window, 'load', initMap);
</script>


<div id="map"></div>
